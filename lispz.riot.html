<!-- using bootstrap code-editor iframe-panel -->
<lispz>
  <bootstrap class=riot>
    <page-content fluid=true>
      <panels name=editor-panels>
        <code-editor  class="riot col-sm-6 draggable" name=code     height=48% heading=Lispz  />
        <code-editor  class="riot col-sm-6 draggable" name=compiled height=48% heading="Generated Javascript" />
        <code-editor  class="riot col-sm-6 draggable" name=output   height=48% heading="Output" />
        <iframe-panel class="riot col-sm-6 draggable" name=target   height=48% heading="Target" />
      </panels>
    </page-content>
  </bootstrap>

  <script type="text/lispz">
    (riot-tag [message riot dict]
      (stateful.morph! lispz) (lispz.update! {debug: true})
      (when (message.ready "code-editor/scratch") []
        (message.send "code-editor/scratch"
          {action: "open" key: "scratchpad.lispz" contents: null})
      )
      (var topic "specifications")
      (message.listen "specifications-menu-open" (=>
        (var menu (dict.map lispz_modules (lambda [title source]
          (return {topic title source})
        )))
        (message.send "specifications-menu" (menu.sort))
      ))
      (when (message.ready "specifications/specifications") []
        (message.send "specifications/specifications"
          {action: "open" name: "scratchpad" scripts: [[]]})
      )
    )
  </script>
</lispz>
