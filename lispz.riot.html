<!-- using bootstrap code-editor iframe-panel -->
<lispz>
  <bootstrap class=riot>
    <page-content fluid=true>
      <panels name=editor-panels>
        <code-editor  class="riot col-sm-6 draggable" name=code     height=48% heading=Lispz  />
        <code-editor  class="riot col-sm-6 draggable" name=compiled height=48% heading="Generated Javascript" />
        <code-editor  class="riot col-sm-6 draggable" name=output   height=48% heading="Output" />
        <iframe-panel class="riot col-sm-6 draggable" name=target   height=48% heading="Target" />
      </panels>
    </page-content>
  </bootstrap>

  <script type="text/lispz">
    (riot-tag [message riot dict]
      (stateful.morph! lispz) (lispz.update! {debug: true})
      (when (message.ready "code-editor/code") []
        (message.send "code-editor/code"
          {action: "open" key: "scratchpad.lispz" contents: null})
      )
      
      (message.clear "code-editor-compile/js")
      (message.link "code-editor-compile/js" "code-editor/compiled")

      (message.clear "code-editor-compile/output")
      (message.link "code-editor-run/output" "code-editor/output")
    )
  </script>
</lispz>
