<html>
<head>
<title>LISPz</title>
<script src="lispz.js"></script>
<script>
  repl = function(run) {
    source = document.getElementById('yalc').value;
    js = lispz.compile(source);
    document.getElementById('js').value = js;
    console.log(lispz.env.list);
    if (run) {
      document.getElementById('output').value = lispz.run(source);
    }
  }
</script>
<script type="text/lispz">
  (console.log "lispz loaded")
</script>
<body>
<div style="position:absolute;bottom:-18px;right:0;">
<textarea id="yalc" cols="80" rows="8">
(var a 7)
(var eight (macro2 (a) (+ 5 2)))
(eight 3)
(var eight (macro2 (a) "(+ 5 a)"))
(eight 3)
</textarea><br>
(var a 1)
(cond (< a 1) (console.log "first")
      (< a 2) (console.log "second")
      (else)  (console.log "third"))
(export "Done")
<textarea id="js" cols="80" rows="8">
</textarea>
<br>
<textarea id="output" cols="80" rows="8">
</textarea>
<div style="position: absolute; right: 16px; bottom: 7px;">
  <button  onclick="javascript:repl(false)">Compile</button>
  <button  onclick="javascript:repl(true)">Run</button>
</div>
</div>
